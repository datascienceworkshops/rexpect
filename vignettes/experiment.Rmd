---
title: "Experiment"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Experiment}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rexpect)
library(purrr)

parts <- cmd("sessionInfo()") %>%
  cmd_r() %>%
  cmd_docker("rocker/tidyverse") %>%
  cmd_asciinema()
parts

# s <- spawn(parts)
# s
# 
# s <-
#   cmd_r() %>%
#   cmd_docker("rocker/r-ver:3.4.0") %>%
#   spawn()
# 
# 
# s <-
#   cmd_bash() %>%
#   cmd_asciinema("bash2.rec") %>%
#   spawn() %>%
#   wait(1)
# 
# tmuxr::send_keys(s$pane, "seq 5", "Enter")
# 
# wait(s, 1) %>%
# bye()
# 
# tmuxr::kill_session(s)
# tmuxr::send_keys(s, "sessionInfo()", "Enter")
# tmuxr::capture_pane(s, cat = TRUE) %>% cat()
# options(tmux_echo = TRUE)
# 


```
